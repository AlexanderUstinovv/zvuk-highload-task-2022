# Zvuk Highload conf task 2022

Спасибо, что нашли время принять участие в нашем челлендже! Внимательно прочитайте инструкции ниже и приходите на стенд обсудить возможные вопросы. На решение не должно уйти больше 90 минут. Задание запускается внутри docker-контейнера.

# Прослушивание музыки

## Задание

Необходимо создать ingestion-процесс для данных о прослушивании музыки и исследовать следующий кейс:

### Обнаружение пиков прослушиваний за неделю, условие

- Общее время прослушивания музыки отличается от среднего более чем на 20%
- Предыдущая неделя не была исключением

Каждый пик должен содержать год, номер недели и общее время прослушивания.

Вводные:
- Есть пример файла с данными о прослушиваниях (используйте ``make fetch-data``, чтобы получить датасет)
- Представим что в Prod окружении приём «новых» данных выполняется постоянно
- Как видно в файле Makefile, мы получаем путь к файлу в качестве параметра
- Используется sqlite3 для демонстрации; В своем решении относитесь к sqlite3 так, как если бы это было боевое хранилище данных
- База данных должна быть сохранена в корневой папке проекта как warehouse.db, например, как это сейчас в [src/db_test.py]
- Есть Makefile, который поможет абстрагировать среду разработки внутри docker-контейнера
- Проверка решения будет осуществляться через Makefile.

Текущий проект содержит все необходимое для создания простого ingest-процесса. Можно добавлять любые необходимые библиотеки для работы, создавать файлы в src, главное, чтобы Makefile мог это подхватить.

[Makefile](Makefile) предоставляет следующие команды: install-dependencies, fetch-data, lint, run-query, run, test, tidy and **help**. Перед всеми заданиями необходимо сначала запустить **make install-dependencies**.

[src/main.py](src/main.py) предоставляет точку входа для вашего кода.

[src/db.py](src/db.py) пуст, а его брат с префиксом _test послужит примером для взаимодействия с SQLite3.

#### Что мы ценим:
- Чистый и отформатированный код, который не требует пояснений: решение говорит само за себя. Пачки документации - индикатор того, что решение не простое для понимания.
- Тесты, без них никуда: поставляемое решение должно быть протестированно.
- Топорность, в хорошем понимании этого слова :) Простота и смекалистость решения должны отражать сложность выполняемой задачи, а само решение не должно превращаться в неподдерживаемый кровавый энтерпрайз с кучей абстракций и шаблонами там, где они не требуются. 

### Ещё пара пунктов:
**Пожалуйста, добавьте инструкции** о вашей стратегии и важных решениях, которые приняли. Также просьба ответить на следующие вопросы:
- Какие меры качества данных вы бы применили к своему решению в производственной среде?
- Что нужно изменить, чтобы масштаб решения работал с набором данных объемом 10 ТБ, при этом ежедневно поступало 5 ГБ новых данных?

**Решение должно быть ссылкой на репозиторий в github, содержащим код и документацию, описанную выше.**

## Следующий этап
Вы можете рассказать нам о ходе своего решения, а мы подскажем или обсудим варианты.
Среди всех правильно ответивших на задание мы разыграем классный приз - И И бонус! Приходите на стенд Звука рассказать нам о своих прошлых проблемах на поприще data ingestion, автор самого эпичного рассказа получит специальный приз :)
